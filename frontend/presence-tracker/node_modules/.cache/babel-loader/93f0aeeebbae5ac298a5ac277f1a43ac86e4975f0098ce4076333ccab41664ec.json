{"ast":null,"code":"var _jsxFileName = \"/home/sl/PycharmProjects/presenza/frontend/presence-tracker/src/components/CalendarComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport './CalendarComponent.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CalendarComponent = ({\n  userEmail\n}) => {\n  _s();\n  var _monthlyPresenceData$, _monthlyPresenceData$2, _monthlyPresenceData$3, _monthlyPresenceData$4, _monthlyPresenceData$5, _monthlyPresenceData$6, _monthlyPresenceData$7, _monthlyPresenceData$8, _monthlyPresenceData$9, _monthlyPresenceData$10;\n  const [date, setDate] = useState(new Date());\n  const [defaultTimes, setDefaultTimes] = useState({\n    entry_time_morning: '',\n    exit_time_morning: '',\n    entry_time_afternoon: '',\n    exit_time_afternoon: ''\n  });\n  const [dailyPresence, setDailyPresence] = useState([]);\n  const [monthlyPresenceData, setMonthlyPresenceData] = useState({});\n  const [showPopup, setShowPopup] = useState(false);\n  const [selectedDay, setSelectedDay] = useState(null);\n  const [error, setError] = useState('');\n  const [isMonthChanged, setIsMonthChanged] = useState(true);\n  const userId = localStorage.getItem('user_id');\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!isMonthChanged) return;\n    const fetchDefaultTimes = async () => {\n      try {\n        const response = await axios.get('http://localhost:8000/get-default-hours', {\n          params: {\n            user_id: userId\n          }\n        });\n        setDefaultTimes(response.data);\n      } catch (error) {\n        console.error(\"Error fetching default times.\");\n      }\n    };\n    const fetchDailyPresence = async () => {\n      try {\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const response = await axios.get(`http://localhost:8000/employee-presence/${userId}/${year}/${month}`);\n        const presenceData = response.data;\n        if (presenceData.length === 0) {\n          console.warn(\"No presence data found for this month. Using default hours.\");\n          // Fill the month with default hours\n          const daysInMonth = new Date(year, date.getMonth() + 1, 0).getDate();\n          const defaultData = Array.from({\n            length: daysInMonth\n          }, (_, dayIndex) => {\n            const dayDate = new Date(year, date.getMonth(), dayIndex + 1).toLocaleDateString('en-CA');\n            const isWeekend = [0, 6].includes(new Date(dayDate).getDay());\n            return {\n              date: dayDate,\n              ...defaultTimes,\n              national_holiday: false,\n              weekend: isWeekend,\n              day_off: false,\n              time_off: \"00:00\",\n              extra_hours: \"00:00\",\n              notes: \"\"\n            };\n          });\n          setDailyPresence(defaultData);\n          const mappedDefaults = defaultData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedDefaults);\n        } else {\n          setDailyPresence(presenceData);\n          const mappedData = presenceData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedData);\n        }\n      } catch (error) {\n        console.error(\"Error fetching presence data:\", error);\n      }\n    };\n    fetchDefaultTimes();\n    fetchDailyPresence();\n    setIsMonthChanged(false);\n  }, [date, userEmail]);\n  const handleSignOut = () => {\n    localStorage.removeItem('token');\n    navigate('/login'); // Redirect to login page\n  };\n  const checkTokenExpiration = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login'); // Redirect to login if token is missing\n      return;\n    }\n    try {\n      const decodedToken = jwtDecode(token);\n      const currentTime = Date.now() / 1000;\n      if (decodedToken.exp < currentTime) {\n        // Token is expired, redirect to login\n        localStorage.removeItem('token');\n        navigate('/login');\n      }\n    } catch (error) {\n      console.error(\"Error decoding token:\", error);\n      localStorage.removeItem('token'); // Clear invalid token\n      navigate('/login'); // Redirect to login on error\n    }\n  };\n  useEffect(() => {\n    checkTokenExpiration();\n  }, []);\n  const handleMonthChange = newDate => {\n    setDate(newDate);\n    setIsMonthChanged(true);\n  };\n  const openPopup = day => {\n    console.log(\"Selected day:\", day);\n    const dayString = day.toLocaleDateString('en-CA');\n    const isWeekend = [0, 6].includes(day.getDay());\n    const presence = monthlyPresenceData[dayString] || dailyPresence.find(p => p.date === dayString) || {\n      ...defaultTimes,\n      national_holiday: false,\n      weekend: isWeekend,\n      day_off: false,\n      time_off: '00:00',\n      extra_hours: '00:00',\n      notes: ''\n    };\n    setSelectedDay(day);\n    setMonthlyPresenceData(prevData => ({\n      ...prevData,\n      [dayString]: presence\n    }));\n    setShowPopup(true);\n  };\n  const closePopup = () => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          ...monthlyPresenceData[dayString]\n        }\n      }));\n    }\n    setShowPopup(false);\n    setSelectedDay(null);\n  };\n  const handlePresenceChange = (field, value) => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          [field]: value\n        }\n      }));\n    }\n  };\n  const isDataChanged = dayString => {\n    const savedData = dailyPresence.find(p => p.date === dayString);\n    const currentData = monthlyPresenceData[dayString];\n    if (!currentData) return false;\n    if (!savedData) return true;\n    return savedData.entry_time_morning !== currentData.entry_time_morning || savedData.exit_time_morning !== currentData.exit_time_morning || savedData.entry_time_afternoon !== currentData.entry_time_afternoon || savedData.exit_time_afternoon !== currentData.exit_time_afternoon || savedData.national_holiday !== currentData.national_holiday || savedData.weekend !== currentData.weekend || savedData.day_off !== currentData.day_off || savedData.time_off !== currentData.time_off || savedData.extra_hours !== currentData.extra_hours || savedData.notes !== currentData.notes;\n  };\n  const isMonthDataChanged = () => {\n    return Object.keys(monthlyPresenceData).some(dayString => {\n      const savedData = dailyPresence.find(p => p.date === dayString);\n      const currentData = monthlyPresenceData[dayString];\n      if (!savedData) return true;\n      return savedData.entry_time_morning !== currentData.entry_time_morning || savedData.exit_time_morning !== currentData.exit_time_morning || savedData.entry_time_afternoon !== currentData.entry_time_afternoon || savedData.exit_time_afternoon !== currentData.exit_time_afternoon || savedData.national_holiday !== currentData.national_holiday || savedData.weekend !== currentData.weekend || savedData.day_off !== currentData.day_off || savedData.time_off !== currentData.time_off || savedData.extra_hours !== currentData.extra_hours || savedData.notes !== currentData.notes;\n    });\n  };\n  const handleSaveMonthlyPresence = async () => {\n    const dataHasChanged = isMonthDataChanged();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n    const allDaysOfMonth = Array.from({\n      length: daysInMonth\n    }, (_, i) => {\n      const day = new Date(year, month, i + 1);\n      return day.toLocaleDateString('en-CA');\n    });\n    if (!dataHasChanged) {\n      const confirmSubmit = window.confirm(\"No changes detected. Do you want to submit the presence data with default values?\");\n      if (!confirmSubmit) return;\n    }\n    const presenceDataList = allDaysOfMonth.map(day => {\n      const savedData = monthlyPresenceData[day] || dailyPresence.find(p => p.date === day) || {\n        ...defaultTimes,\n        national_holiday: false,\n        weekend: [0, 6].includes(new Date(day).getDay()),\n        // Mark weekends as true\n        day_off: false,\n        time_off: \"00:00\",\n        // Default value\n        extra_hours: \"00:00\",\n        // Default value\n        notes: \"\" // Default value\n      };\n      return {\n        ...savedData,\n        employee_id: userId,\n        date: day,\n        time_off: savedData.time_off || \"00:00\",\n        extra_hours: savedData.extra_hours || \"00:00\"\n      };\n    });\n    try {\n      await axios.post(`http://localhost:8000/employee-dashboard?user_id=${userId}`, presenceDataList);\n      alert('Monthly presence data saved successfully!');\n    } catch (error) {\n      console.error(\"Error saving monthly presence data:\", error);\n      alert(\"There was an error saving the data. Please try again.\");\n    }\n  };\n  const handleDefaultHoursSave = async () => {\n    const defaultHoursData = {\n      user_id: userId,\n      entry_time_morning: defaultTimes.entry_time_morning,\n      exit_time_morning: defaultTimes.exit_time_morning,\n      entry_time_afternoon: defaultTimes.entry_time_afternoon,\n      exit_time_afternoon: defaultTimes.exit_time_afternoon\n    };\n    try {\n      const response = await axios.get('http://localhost:8000/get-default-hours', {\n        params: {\n          user_id: userId\n        }\n      });\n      if (response.data) {\n        await axios.put('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours updated successfully!');\n      } else {\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        // Handle the case where no data was found (404)\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      } else {\n        console.error(\"Error saving default hours:\", error);\n        alert(\"Error occurred while saving default hours.\");\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"calendar-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Monthly Presence Tracker\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignOut,\n      className: \"sign-out-button\",\n      children: \"Sign Out\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n      onChange: setDate,\n      value: date,\n      onActiveStartDateChange: ({\n        activeStartDate\n      }) => handleMonthChange(activeStartDate),\n      tileContent: ({\n        date\n      }) => {\n        const dayString = date.toLocaleDateString('en-CA');\n        const hasCustomData = isDataChanged(dayString);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => openPopup(date),\n          style: {\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            zIndex: 1,\n            cursor: 'pointer'\n          },\n          children: hasCustomData ? '✔' : 'default'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this);\n      },\n      view: \"month\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this), showPopup && selectedDay && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Edit Presence for \", selectedDay.toDateString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Morning Entry:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$ = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$ === void 0 ? void 0 : _monthlyPresenceData$.entry_time_morning) || '',\n          onChange: e => handlePresenceChange('entry_time_morning', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Morning Exit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$2 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$2 === void 0 ? void 0 : _monthlyPresenceData$2.exit_time_morning) || '',\n          onChange: e => handlePresenceChange('exit_time_morning', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Afternoon Entry:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$3 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$3 === void 0 ? void 0 : _monthlyPresenceData$3.entry_time_afternoon) || '',\n          onChange: e => handlePresenceChange('entry_time_afternoon', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Afternoon Exit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$4 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$4 === void 0 ? void 0 : _monthlyPresenceData$4.exit_time_afternoon) || '',\n          onChange: e => handlePresenceChange('exit_time_afternoon', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"National Holiday:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: ((_monthlyPresenceData$5 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$5 === void 0 ? void 0 : _monthlyPresenceData$5.national_holiday) || false,\n          onChange: e => handlePresenceChange('national_holiday', e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Weekend:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: ((_monthlyPresenceData$6 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$6 === void 0 ? void 0 : _monthlyPresenceData$6.weekend) || false,\n          onChange: e => handlePresenceChange('weekend', e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Day Off:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: ((_monthlyPresenceData$7 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$7 === void 0 ? void 0 : _monthlyPresenceData$7.day_off) || false,\n          onChange: e => handlePresenceChange('day_off', e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Time Off:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$8 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$8 === void 0 ? void 0 : _monthlyPresenceData$8.time_off) || '',\n          onChange: e => handlePresenceChange('time_off', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Extra hours:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: ((_monthlyPresenceData$9 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$9 === void 0 ? void 0 : _monthlyPresenceData$9.extra_hours) || '',\n          onChange: e => handlePresenceChange('extra_hours', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Notes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: ((_monthlyPresenceData$10 = monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]) === null || _monthlyPresenceData$10 === void 0 ? void 0 : _monthlyPresenceData$10.notes) || '',\n          onChange: e => handlePresenceChange('notes', e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closePopup,\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"default-times\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Default Times\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Morning Entry:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: defaultTimes.entry_time_morning,\n          onChange: e => setDefaultTimes({\n            ...defaultTimes,\n            entry_time_morning: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Morning Exit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: defaultTimes.exit_time_morning,\n          onChange: e => setDefaultTimes({\n            ...defaultTimes,\n            exit_time_morning: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Afternoon Entry:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: defaultTimes.entry_time_afternoon,\n          onChange: e => setDefaultTimes({\n            ...defaultTimes,\n            entry_time_afternoon: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Afternoon Exit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"time\",\n          value: defaultTimes.exit_time_afternoon,\n          onChange: e => setDefaultTimes({\n            ...defaultTimes,\n            exit_time_afternoon: e.target.value\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"save-button\",\n        onClick: handleSaveMonthlyPresence,\n        children: \"Save Presence for Month\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"default-hours-button\",\n        onClick: handleDefaultHoursSave,\n        children: \"Save Default Hours\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 311,\n    columnNumber: 5\n  }, this);\n};\n_s(CalendarComponent, \"dUHo6Ou0W/F+jF8i954ZE1BS5f8=\", false, function () {\n  return [useNavigate];\n});\n_c = CalendarComponent;\nexport default CalendarComponent;\nvar _c;\n$RefreshReg$(_c, \"CalendarComponent\");","map":{"version":3,"names":["React","useState","useEffect","axios","Calendar","useNavigate","jwtDecode","jsxDEV","_jsxDEV","CalendarComponent","userEmail","_s","_monthlyPresenceData$","_monthlyPresenceData$2","_monthlyPresenceData$3","_monthlyPresenceData$4","_monthlyPresenceData$5","_monthlyPresenceData$6","_monthlyPresenceData$7","_monthlyPresenceData$8","_monthlyPresenceData$9","_monthlyPresenceData$10","date","setDate","Date","defaultTimes","setDefaultTimes","entry_time_morning","exit_time_morning","entry_time_afternoon","exit_time_afternoon","dailyPresence","setDailyPresence","monthlyPresenceData","setMonthlyPresenceData","showPopup","setShowPopup","selectedDay","setSelectedDay","error","setError","isMonthChanged","setIsMonthChanged","userId","localStorage","getItem","navigate","fetchDefaultTimes","response","get","params","user_id","data","console","fetchDailyPresence","year","getFullYear","month","String","getMonth","padStart","presenceData","length","warn","daysInMonth","getDate","defaultData","Array","from","_","dayIndex","dayDate","toLocaleDateString","isWeekend","includes","getDay","national_holiday","weekend","day_off","time_off","extra_hours","notes","mappedDefaults","reduce","acc","dayData","mappedData","handleSignOut","removeItem","checkTokenExpiration","token","decodedToken","currentTime","now","exp","handleMonthChange","newDate","openPopup","day","log","dayString","presence","find","p","prevData","closePopup","handlePresenceChange","field","value","isDataChanged","savedData","currentData","isMonthDataChanged","Object","keys","some","handleSaveMonthlyPresence","dataHasChanged","allDaysOfMonth","i","confirmSubmit","window","confirm","presenceDataList","map","employee_id","post","alert","handleDefaultHoursSave","defaultHoursData","put","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","onActiveStartDateChange","activeStartDate","tileContent","hasCustomData","style","width","height","display","alignItems","justifyContent","zIndex","cursor","view","toDateString","type","e","target","checked","_c","$RefreshReg$"],"sources":["/home/sl/PycharmProjects/presenza/frontend/presence-tracker/src/components/CalendarComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport './CalendarComponent.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\n\n\nconst CalendarComponent = ({ userEmail }) => {\n  const [date, setDate] = useState(new Date());\n  const [defaultTimes, setDefaultTimes] = useState({\n    entry_time_morning: '',\n    exit_time_morning: '',\n    entry_time_afternoon: '',\n    exit_time_afternoon: '',\n  });\n  const [dailyPresence, setDailyPresence] = useState([]);\n  const [monthlyPresenceData, setMonthlyPresenceData] = useState({});\n  const [showPopup, setShowPopup] = useState(false);\n  const [selectedDay, setSelectedDay] = useState(null);\n  const [error, setError] = useState('');\n  const [isMonthChanged, setIsMonthChanged] = useState(true);\n  const userId = localStorage.getItem('user_id');\n  const navigate = useNavigate(); \n\n  useEffect(() => {\n    if (!isMonthChanged) return;\n    \n    const fetchDefaultTimes = async () => {\n      try {\n        const response = await axios.get('http://localhost:8000/get-default-hours', {\n          params: { user_id: userId }\n        });\n        setDefaultTimes(response.data);\n      } catch (error) {\n        console.error(\"Error fetching default times.\");\n      }\n    };\n\n    const fetchDailyPresence = async () => {\n      try {\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const response = await axios.get(`http://localhost:8000/employee-presence/${userId}/${year}/${month}`);\n        const presenceData = response.data;\n    \n        if (presenceData.length === 0) {\n          console.warn(\"No presence data found for this month. Using default hours.\");\n          // Fill the month with default hours\n          const daysInMonth = new Date(year, date.getMonth() + 1, 0).getDate();\n          const defaultData = Array.from({ length: daysInMonth }, (_, dayIndex) => {\n            const dayDate = new Date(year, date.getMonth(), dayIndex + 1).toLocaleDateString('en-CA');\n            const isWeekend = [0, 6].includes(new Date(dayDate).getDay());\n            return {\n              date: dayDate,\n              ...defaultTimes,\n              national_holiday: false,\n              weekend: isWeekend,\n              day_off: false,\n              time_off: \"00:00\",\n              extra_hours: \"00:00\",\n              notes: \"\",\n            };\n          });\n    \n          setDailyPresence(defaultData);\n          const mappedDefaults = defaultData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedDefaults);\n        } else {\n          setDailyPresence(presenceData);\n          const mappedData = presenceData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedData);\n        }\n      } catch (error) {\n        console.error(\"Error fetching presence data:\", error);\n      }\n    };\n    \n    \n\n    fetchDefaultTimes();\n    fetchDailyPresence();\n    setIsMonthChanged(false);\n  }, [date, userEmail]);\n\n  const handleSignOut = () => {\n    localStorage.removeItem('token');\n    navigate('/login'); // Redirect to login page\n  };\n\n  const checkTokenExpiration = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login'); // Redirect to login if token is missing\n      return;\n    }\n\n    try {\n      const decodedToken = jwtDecode(token);\n      const currentTime = Date.now() / 1000;\n      if (decodedToken.exp < currentTime) {\n        // Token is expired, redirect to login\n        localStorage.removeItem('token');\n        navigate('/login');\n      }\n    } catch (error) {\n      console.error(\"Error decoding token:\", error);\n      localStorage.removeItem('token'); // Clear invalid token\n      navigate('/login'); // Redirect to login on error\n    }\n  };\n  \n  useEffect(() => {\n    checkTokenExpiration();\n  }, []);\n\n  const handleMonthChange = (newDate) => {\n    setDate(newDate);\n    setIsMonthChanged(true); \n  };\n\n  const openPopup = (day) => {\n    console.log(\"Selected day:\", day);\n    const dayString = day.toLocaleDateString('en-CA');\n    const isWeekend = [0, 6].includes(day.getDay());\n\n    const presence = monthlyPresenceData[dayString] || dailyPresence.find(p => p.date === dayString) || {\n      ...defaultTimes,\n      national_holiday: false,\n      weekend: isWeekend,\n      day_off: false,\n      time_off: '00:00',\n      extra_hours: '00:00',\n      notes: '',\n    };\n\n    setSelectedDay(day);\n    setMonthlyPresenceData(prevData => ({\n      ...prevData,\n      [dayString]: presence,\n    }));\n    setShowPopup(true);\n  };\n\n  const closePopup = () => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          ...monthlyPresenceData[dayString], \n        },\n      }));\n    }\n    setShowPopup(false);\n    setSelectedDay(null);\n  };\n\n  const handlePresenceChange = (field, value) => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          [field]: value,\n        },\n      }));\n    }\n  };\n  \n\n  const isDataChanged = (dayString) => {\n    const savedData = dailyPresence.find(p => p.date === dayString);\n    const currentData = monthlyPresenceData[dayString];\n  \n    if (!currentData) return false; \n    if (!savedData) return true; \n  \n    return (\n      savedData.entry_time_morning !== currentData.entry_time_morning ||\n      savedData.exit_time_morning !== currentData.exit_time_morning ||\n      savedData.entry_time_afternoon !== currentData.entry_time_afternoon ||\n      savedData.exit_time_afternoon !== currentData.exit_time_afternoon ||\n      savedData.national_holiday !== currentData.national_holiday ||\n      savedData.weekend !== currentData.weekend ||\n      savedData.day_off !== currentData.day_off ||\n      savedData.time_off !== currentData.time_off ||\n      savedData.extra_hours !== currentData.extra_hours ||\n      savedData.notes !== currentData.notes\n    );\n  };\n\n  const isMonthDataChanged = () => {\n    return Object.keys(monthlyPresenceData).some(dayString => {\n      const savedData = dailyPresence.find(p => p.date === dayString);\n      const currentData = monthlyPresenceData[dayString];\n  \n      if (!savedData) return true;\n      return (\n        savedData.entry_time_morning !== currentData.entry_time_morning ||\n        savedData.exit_time_morning !== currentData.exit_time_morning ||\n        savedData.entry_time_afternoon !== currentData.entry_time_afternoon ||\n        savedData.exit_time_afternoon !== currentData.exit_time_afternoon ||\n        savedData.national_holiday !== currentData.national_holiday ||\n        savedData.weekend !== currentData.weekend ||\n        savedData.day_off !== currentData.day_off ||\n        savedData.time_off !== currentData.time_off ||\n        savedData.extra_hours !== currentData.extra_hours ||\n        savedData.notes !== currentData.notes\n      );\n    });\n  };\n\n  const handleSaveMonthlyPresence = async () => {\n    const dataHasChanged = isMonthDataChanged();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n  \n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n    const allDaysOfMonth = Array.from({ length: daysInMonth }, (_, i) => {\n      const day = new Date(year, month, i + 1);\n      return day.toLocaleDateString('en-CA');});\n      \n    if (!dataHasChanged) {\n      const confirmSubmit = window.confirm(\n        \"No changes detected. Do you want to submit the presence data with default values?\"\n      );\n      if (!confirmSubmit) return;\n\n    }\n\n    const presenceDataList = allDaysOfMonth.map(day => {\n      const savedData = monthlyPresenceData[day] || dailyPresence.find(p => p.date === day) || {\n        ...defaultTimes,\n        national_holiday: false,\n        weekend: [0, 6].includes(new Date(day).getDay()),  // Mark weekends as true\n        day_off: false,\n        time_off: \"00:00\", // Default value\n        extra_hours: \"00:00\", // Default value\n        notes: \"\", // Default value\n      };\n  \n      return {\n        ...savedData,\n        employee_id: userId,\n        date: day,\n        time_off: savedData.time_off || \"00:00\",\n        extra_hours: savedData.extra_hours || \"00:00\",\n      };\n    });\n\n\n    try {\n      await axios.post(\n        `http://localhost:8000/employee-dashboard?user_id=${userId}`,\n        presenceDataList\n      );\n      alert('Monthly presence data saved successfully!');\n    } catch (error) {\n      console.error(\"Error saving monthly presence data:\", error);\n      alert(\"There was an error saving the data. Please try again.\");\n    }\n  };\n\n  \n\n  const handleDefaultHoursSave = async () => {\n    const defaultHoursData = {\n      user_id: userId,\n      entry_time_morning: defaultTimes.entry_time_morning,\n      exit_time_morning: defaultTimes.exit_time_morning,\n      entry_time_afternoon: defaultTimes.entry_time_afternoon,\n      exit_time_afternoon: defaultTimes.exit_time_afternoon,\n    };\n\n    try {\n      const response = await axios.get('http://localhost:8000/get-default-hours', {\n        params: { user_id: userId }\n      });\n\n      if (response.data) {\n        await axios.put('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours updated successfully!');\n      } else {\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        // Handle the case where no data was found (404)\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      } else {\n        console.error(\"Error saving default hours:\", error);\n        alert(\"Error occurred while saving default hours.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"calendar-container\">\n      <h1>Monthly Presence Tracker</h1>\n      {/* Sign Out Button */}\n      <button onClick={handleSignOut} className=\"sign-out-button\">Sign Out</button>\n      {error && <p className=\"error-message\">{error}</p>}\n      <Calendar\n        onChange={setDate}\n        value={date}\n        onActiveStartDateChange={({ activeStartDate }) => handleMonthChange(activeStartDate)}\n        tileContent={({ date }) => {\n          const dayString = date.toLocaleDateString('en-CA');\n          const hasCustomData = isDataChanged(dayString);\n          return (\n            <div onClick={() => openPopup(date)}\n                 style={{width: '100%',\n                   height: '100%',\n                   display: 'flex',\n                   alignItems: 'center',\n                   justifyContent: 'center',\n                   zIndex: 1,\n                   cursor: 'pointer', }}>\n                   {hasCustomData ? '✔' : 'default'}\n                 </div>\n              );\n        }}\n        view=\"month\"\n      />\n\n      {showPopup && selectedDay && (\n        <div className=\"popup\">\n          <h2>Edit Presence for {selectedDay.toDateString()}</h2>\n          <div>\n            <label>Morning Entry:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.entry_time_morning || ''}\n              onChange={(e) => handlePresenceChange('entry_time_morning', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Morning Exit:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.exit_time_morning || ''}\n              onChange={(e) => handlePresenceChange('exit_time_morning', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Afternoon Entry:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.entry_time_afternoon || ''}\n              onChange={(e) => handlePresenceChange('entry_time_afternoon', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Afternoon Exit:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.exit_time_afternoon || ''}\n              onChange={(e) => handlePresenceChange('exit_time_afternoon', e.target.value)}\n            />\n          </div>\n\n          <div>\n            <label>National Holiday:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.national_holiday || false}\n              onChange={(e) => handlePresenceChange('national_holiday', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Weekend:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.weekend || false}\n              onChange={(e) => handlePresenceChange('weekend', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Day Off:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.day_off || false}\n              onChange={(e) => handlePresenceChange('day_off', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Time Off:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.time_off || ''}\n              onChange={(e) => handlePresenceChange('time_off', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Extra hours:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.extra_hours || ''}\n              onChange={(e) => handlePresenceChange('extra_hours', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Notes:</label>\n            <textarea\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.notes || ''}\n              onChange={(e) => handlePresenceChange('notes', e.target.value)}\n            />\n          </div>\n          <button onClick={closePopup}>Close</button>\n        </div>\n      )}\n\n      <div className=\"default-times\">\n              <h2>Default Times</h2>\n              <div>\n                <label>Morning Entry:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.entry_time_morning}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, entry_time_morning: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Morning Exit:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.exit_time_morning}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, exit_time_morning: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Afternoon Entry:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.entry_time_afternoon}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, entry_time_afternoon: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Afternoon Exit:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.exit_time_afternoon}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, exit_time_afternoon: e.target.value })}\n                />\n              </div>\n              <button className=\"save-button\" onClick={handleSaveMonthlyPresence}>Save Presence for Month</button>\n              <button className=\"default-hours-button\" onClick={handleDefaultHoursSave}>Save Default Hours</button>\n            </div>\n          </div>\n  );\n};\n\nexport default CalendarComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}