{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import Calendar from'react-calendar';import'react-calendar/dist/Calendar.css';import'./CalendarComponent.css';import{useNavigate}from'react-router-dom';import{jwtDecode}from'jwt-decode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CalendarComponent=_ref=>{var _monthlyPresenceData$,_monthlyPresenceData$2,_monthlyPresenceData$3,_monthlyPresenceData$4,_monthlyPresenceData$5,_monthlyPresenceData$6,_monthlyPresenceData$7,_monthlyPresenceData$8,_monthlyPresenceData$9,_monthlyPresenceData$10;let{userEmail}=_ref;const[date,setDate]=useState(new Date());const[defaultTimes,setDefaultTimes]=useState({entry_time_morning:'',exit_time_morning:'',entry_time_afternoon:'',exit_time_afternoon:''});const[dailyPresence,setDailyPresence]=useState([]);const[monthlyPresenceData,setMonthlyPresenceData]=useState({});const[showPopup,setShowPopup]=useState(false);const[selectedDay,setSelectedDay]=useState(null);const[error,setError]=useState('');const[isMonthChanged,setIsMonthChanged]=useState(true);const userId=localStorage.getItem('user_id');const navigate=useNavigate();useEffect(()=>{if(!isMonthChanged)return;const fetchDefaultTimes=async()=>{try{const response=await axios.get('http://localhost:8000/get-default-hours',{params:{user_id:userId}});setDefaultTimes(response.data);}catch(error){console.error(\"Error fetching default times.\");}};const fetchDailyPresence=async()=>{try{const year=date.getFullYear();const month=String(date.getMonth()+1).padStart(2,'0');const response=await axios.get(`http://localhost:8000/employee-presence/${userId}/${year}/${month}`);const presenceData=response.data;if(presenceData.length===0){console.warn(\"No presence data found for this month. Using default hours.\");// Fill the month with default hours\nconst daysInMonth=new Date(year,date.getMonth()+1,0).getDate();const defaultData=Array.from({length:daysInMonth},(_,dayIndex)=>{const dayDate=new Date(year,date.getMonth(),dayIndex+1).toLocaleDateString('en-CA');const isWeekend=[0,6].includes(new Date(dayDate).getDay());return{date:dayDate,...defaultTimes,national_holiday:false,weekend:isWeekend,day_off:false,time_off:\"00:00\",extra_hours:\"00:00\",notes:\"\"};});setDailyPresence(defaultData);const mappedDefaults=defaultData.reduce((acc,dayData)=>{acc[dayData.date]=dayData;return acc;},{});setMonthlyPresenceData(mappedDefaults);}else{setDailyPresence(presenceData);const mappedData=presenceData.reduce((acc,dayData)=>{acc[dayData.date]=dayData;return acc;},{});setMonthlyPresenceData(mappedData);}}catch(error){console.error(\"Error fetching presence data:\",error);}};fetchDefaultTimes();fetchDailyPresence();setIsMonthChanged(false);},[date,userEmail]);const handleSignOut=()=>{localStorage.removeItem('token');navigate('/login');// Redirect to login page\n};const checkTokenExpiration=()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');// Redirect to login if token is missing\nreturn;}try{const decodedToken=jwtDecode(token);const currentTime=Date.now()/1000;if(decodedToken.exp<currentTime){// Token is expired, redirect to login\nlocalStorage.removeItem('token');navigate('/login');}}catch(error){console.error(\"Error decoding token:\",error);localStorage.removeItem('token');// Clear invalid token\nnavigate('/login');// Redirect to login on error\n}};useEffect(()=>{checkTokenExpiration();},[]);const handleMonthChange=newDate=>{setDate(newDate);setIsMonthChanged(true);};const openPopup=day=>{console.log(\"Selected day:\",day);const dayString=day.toLocaleDateString('en-CA');const isWeekend=[0,6].includes(day.getDay());const presence=monthlyPresenceData[dayString]||dailyPresence.find(p=>p.date===dayString)||{...defaultTimes,national_holiday:false,weekend:isWeekend,day_off:false,time_off:'00:00',extra_hours:'00:00',notes:''};setSelectedDay(day);setMonthlyPresenceData(prevData=>({...prevData,[dayString]:presence}));setShowPopup(true);};const closePopup=()=>{if(selectedDay){const dayString=selectedDay.toLocaleDateString('en-CA');setMonthlyPresenceData(prevData=>({...prevData,[dayString]:{...prevData[dayString],...monthlyPresenceData[dayString]}}));}setShowPopup(false);setSelectedDay(null);};const handlePresenceChange=(field,value)=>{if(selectedDay){const dayString=selectedDay.toLocaleDateString('en-CA');setMonthlyPresenceData(prevData=>({...prevData,[dayString]:{...prevData[dayString],[field]:value}}));}};const isDataChanged=dayString=>{const savedData=dailyPresence.find(p=>p.date===dayString);const currentData=monthlyPresenceData[dayString];if(!currentData)return false;if(!savedData)return true;return savedData.entry_time_morning!==currentData.entry_time_morning||savedData.exit_time_morning!==currentData.exit_time_morning||savedData.entry_time_afternoon!==currentData.entry_time_afternoon||savedData.exit_time_afternoon!==currentData.exit_time_afternoon||savedData.national_holiday!==currentData.national_holiday||savedData.weekend!==currentData.weekend||savedData.day_off!==currentData.day_off||savedData.time_off!==currentData.time_off||savedData.extra_hours!==currentData.extra_hours||savedData.notes!==currentData.notes;};const isMonthDataChanged=()=>{return Object.keys(monthlyPresenceData).some(dayString=>{const savedData=dailyPresence.find(p=>p.date===dayString);const currentData=monthlyPresenceData[dayString];if(!savedData)return true;return savedData.entry_time_morning!==currentData.entry_time_morning||savedData.exit_time_morning!==currentData.exit_time_morning||savedData.entry_time_afternoon!==currentData.entry_time_afternoon||savedData.exit_time_afternoon!==currentData.exit_time_afternoon||savedData.national_holiday!==currentData.national_holiday||savedData.weekend!==currentData.weekend||savedData.day_off!==currentData.day_off||savedData.time_off!==currentData.time_off||savedData.extra_hours!==currentData.extra_hours||savedData.notes!==currentData.notes;});};const handleSaveMonthlyPresence=async()=>{const dataHasChanged=isMonthDataChanged();const year=date.getFullYear();const month=date.getMonth();const daysInMonth=new Date(year,month+1,0).getDate();const allDaysOfMonth=Array.from({length:daysInMonth},(_,i)=>{const day=new Date(year,month,i+1);return day.toLocaleDateString('en-CA');});if(!dataHasChanged){const confirmSubmit=window.confirm(\"No changes detected. Do you want to submit the presence data with default values?\");if(!confirmSubmit)return;}const presenceDataList=allDaysOfMonth.map(day=>{const savedData=monthlyPresenceData[day]||dailyPresence.find(p=>p.date===day)||{...defaultTimes,national_holiday:false,weekend:[0,6].includes(new Date(day).getDay()),// Mark weekends as true\nday_off:false,time_off:\"00:00\",// Default value\nextra_hours:\"00:00\",// Default value\nnotes:\"\"// Default value\n};return{...savedData,employee_id:userId,date:day,time_off:savedData.time_off||\"00:00\",extra_hours:savedData.extra_hours||\"00:00\"};});try{await axios.post(`http://localhost:8000/employee-dashboard?user_id=${userId}`,presenceDataList);alert('Monthly presence data saved successfully!');}catch(error){console.error(\"Error saving monthly presence data:\",error);alert(\"There was an error saving the data. Please try again.\");}};const handleDefaultHoursSave=async()=>{const defaultHoursData={user_id:userId,entry_time_morning:defaultTimes.entry_time_morning,exit_time_morning:defaultTimes.exit_time_morning,entry_time_afternoon:defaultTimes.entry_time_afternoon,exit_time_afternoon:defaultTimes.exit_time_afternoon};try{const response=await axios.get('http://localhost:8000/get-default-hours',{params:{user_id:userId}});if(response.data){await axios.put('http://localhost:8000/default-hours',defaultHoursData);alert('Default hours updated successfully!');}else{await axios.post('http://localhost:8000/default-hours',defaultHoursData);alert('Default hours saved successfully!');}}catch(error){if(error.response&&error.response.status===404){// Handle the case where no data was found (404)\nawait axios.post('http://localhost:8000/default-hours',defaultHoursData);alert('Default hours saved successfully!');}else{console.error(\"Error saving default hours:\",error);alert(\"Error occurred while saving default hours.\");}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"calendar-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Monthly Presence Tracker\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOut,className:\"sign-out-button\",children:\"Sign Out\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(Calendar,{onChange:setDate,value:date,onActiveStartDateChange:_ref2=>{let{activeStartDate}=_ref2;return handleMonthChange(activeStartDate);},tileContent:_ref3=>{let{date}=_ref3;const dayString=date.toLocaleDateString('en-CA');const hasCustomData=isDataChanged(dayString);return/*#__PURE__*/_jsx(\"div\",{onClick:()=>openPopup(date),style:{width:'100%',height:'100%',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1,cursor:'pointer'},children:hasCustomData?'âœ”':'default'});},view:\"month\"}),showPopup&&selectedDay&&/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Edit Presence for \",selectedDay.toDateString()]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Morning Entry:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$===void 0?void 0:_monthlyPresenceData$.entry_time_morning)||'',onChange:e=>handlePresenceChange('entry_time_morning',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Morning Exit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$2=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$2===void 0?void 0:_monthlyPresenceData$2.exit_time_morning)||'',onChange:e=>handlePresenceChange('exit_time_morning',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Afternoon Entry:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$3=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$3===void 0?void 0:_monthlyPresenceData$3.entry_time_afternoon)||'',onChange:e=>handlePresenceChange('entry_time_afternoon',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Afternoon Exit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$4=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$4===void 0?void 0:_monthlyPresenceData$4.exit_time_afternoon)||'',onChange:e=>handlePresenceChange('exit_time_afternoon',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"National Holiday:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:((_monthlyPresenceData$5=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$5===void 0?void 0:_monthlyPresenceData$5.national_holiday)||false,onChange:e=>handlePresenceChange('national_holiday',e.target.checked)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Weekend:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:((_monthlyPresenceData$6=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$6===void 0?void 0:_monthlyPresenceData$6.weekend)||false,onChange:e=>handlePresenceChange('weekend',e.target.checked)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Day Off:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:((_monthlyPresenceData$7=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$7===void 0?void 0:_monthlyPresenceData$7.day_off)||false,onChange:e=>handlePresenceChange('day_off',e.target.checked)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Time Off:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$8=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$8===void 0?void 0:_monthlyPresenceData$8.time_off)||'',onChange:e=>handlePresenceChange('time_off',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Extra hours:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:((_monthlyPresenceData$9=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$9===void 0?void 0:_monthlyPresenceData$9.extra_hours)||'',onChange:e=>handlePresenceChange('extra_hours',e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Notes:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:((_monthlyPresenceData$10=monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')])===null||_monthlyPresenceData$10===void 0?void 0:_monthlyPresenceData$10.notes)||'',onChange:e=>handlePresenceChange('notes',e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:closePopup,children:\"Close\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"default-times\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Default Times\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Morning Entry:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:defaultTimes.entry_time_morning,onChange:e=>setDefaultTimes({...defaultTimes,entry_time_morning:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Morning Exit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:defaultTimes.exit_time_morning,onChange:e=>setDefaultTimes({...defaultTimes,exit_time_morning:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Afternoon Entry:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:defaultTimes.entry_time_afternoon,onChange:e=>setDefaultTimes({...defaultTimes,entry_time_afternoon:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Afternoon Exit:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:defaultTimes.exit_time_afternoon,onChange:e=>setDefaultTimes({...defaultTimes,exit_time_afternoon:e.target.value})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"save-button\",onClick:handleSaveMonthlyPresence,children:\"Save Presence for Month\"}),/*#__PURE__*/_jsx(\"button\",{className:\"default-hours-button\",onClick:handleDefaultHoursSave,children:\"Save Default Hours\"})]})]});};export default CalendarComponent;","map":{"version":3,"names":["React","useState","useEffect","axios","Calendar","useNavigate","jwtDecode","jsx","_jsx","jsxs","_jsxs","CalendarComponent","_ref","_monthlyPresenceData$","_monthlyPresenceData$2","_monthlyPresenceData$3","_monthlyPresenceData$4","_monthlyPresenceData$5","_monthlyPresenceData$6","_monthlyPresenceData$7","_monthlyPresenceData$8","_monthlyPresenceData$9","_monthlyPresenceData$10","userEmail","date","setDate","Date","defaultTimes","setDefaultTimes","entry_time_morning","exit_time_morning","entry_time_afternoon","exit_time_afternoon","dailyPresence","setDailyPresence","monthlyPresenceData","setMonthlyPresenceData","showPopup","setShowPopup","selectedDay","setSelectedDay","error","setError","isMonthChanged","setIsMonthChanged","userId","localStorage","getItem","navigate","fetchDefaultTimes","response","get","params","user_id","data","console","fetchDailyPresence","year","getFullYear","month","String","getMonth","padStart","presenceData","length","warn","daysInMonth","getDate","defaultData","Array","from","_","dayIndex","dayDate","toLocaleDateString","isWeekend","includes","getDay","national_holiday","weekend","day_off","time_off","extra_hours","notes","mappedDefaults","reduce","acc","dayData","mappedData","handleSignOut","removeItem","checkTokenExpiration","token","decodedToken","currentTime","now","exp","handleMonthChange","newDate","openPopup","day","log","dayString","presence","find","p","prevData","closePopup","handlePresenceChange","field","value","isDataChanged","savedData","currentData","isMonthDataChanged","Object","keys","some","handleSaveMonthlyPresence","dataHasChanged","allDaysOfMonth","i","confirmSubmit","window","confirm","presenceDataList","map","employee_id","post","alert","handleDefaultHoursSave","defaultHoursData","put","status","className","children","onClick","onChange","onActiveStartDateChange","_ref2","activeStartDate","tileContent","_ref3","hasCustomData","style","width","height","display","alignItems","justifyContent","zIndex","cursor","view","toDateString","type","e","target","checked"],"sources":["/home/sl/PycharmProjects/presenza/frontend/presence-tracker/src/components/CalendarComponent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport './CalendarComponent.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\n\n\nconst CalendarComponent = ({ userEmail }) => {\n  const [date, setDate] = useState(new Date());\n  const [defaultTimes, setDefaultTimes] = useState({\n    entry_time_morning: '',\n    exit_time_morning: '',\n    entry_time_afternoon: '',\n    exit_time_afternoon: '',\n  });\n  const [dailyPresence, setDailyPresence] = useState([]);\n  const [monthlyPresenceData, setMonthlyPresenceData] = useState({});\n  const [showPopup, setShowPopup] = useState(false);\n  const [selectedDay, setSelectedDay] = useState(null);\n  const [error, setError] = useState('');\n  const [isMonthChanged, setIsMonthChanged] = useState(true);\n  const userId = localStorage.getItem('user_id');\n  const navigate = useNavigate(); \n\n  useEffect(() => {\n    if (!isMonthChanged) return;\n    \n    const fetchDefaultTimes = async () => {\n      try {\n        const response = await axios.get('http://localhost:8000/get-default-hours', {\n          params: { user_id: userId }\n        });\n        setDefaultTimes(response.data);\n      } catch (error) {\n        console.error(\"Error fetching default times.\");\n      }\n    };\n\n    const fetchDailyPresence = async () => {\n      try {\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const response = await axios.get(`http://localhost:8000/employee-presence/${userId}/${year}/${month}`);\n        const presenceData = response.data;\n    \n        if (presenceData.length === 0) {\n          console.warn(\"No presence data found for this month. Using default hours.\");\n          // Fill the month with default hours\n          const daysInMonth = new Date(year, date.getMonth() + 1, 0).getDate();\n          const defaultData = Array.from({ length: daysInMonth }, (_, dayIndex) => {\n            const dayDate = new Date(year, date.getMonth(), dayIndex + 1).toLocaleDateString('en-CA');\n            const isWeekend = [0, 6].includes(new Date(dayDate).getDay());\n            return {\n              date: dayDate,\n              ...defaultTimes,\n              national_holiday: false,\n              weekend: isWeekend,\n              day_off: false,\n              time_off: \"00:00\",\n              extra_hours: \"00:00\",\n              notes: \"\",\n            };\n          });\n    \n          setDailyPresence(defaultData);\n          const mappedDefaults = defaultData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedDefaults);\n        } else {\n          setDailyPresence(presenceData);\n          const mappedData = presenceData.reduce((acc, dayData) => {\n            acc[dayData.date] = dayData;\n            return acc;\n          }, {});\n          setMonthlyPresenceData(mappedData);\n        }\n      } catch (error) {\n        console.error(\"Error fetching presence data:\", error);\n      }\n    };\n    \n    \n\n    fetchDefaultTimes();\n    fetchDailyPresence();\n    setIsMonthChanged(false);\n  }, [date, userEmail]);\n\n  const handleSignOut = () => {\n    localStorage.removeItem('token');\n    navigate('/login'); // Redirect to login page\n  };\n\n  const checkTokenExpiration = () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login'); // Redirect to login if token is missing\n      return;\n    }\n\n    try {\n      const decodedToken = jwtDecode(token);\n      const currentTime = Date.now() / 1000;\n      if (decodedToken.exp < currentTime) {\n        // Token is expired, redirect to login\n        localStorage.removeItem('token');\n        navigate('/login');\n      }\n    } catch (error) {\n      console.error(\"Error decoding token:\", error);\n      localStorage.removeItem('token'); // Clear invalid token\n      navigate('/login'); // Redirect to login on error\n    }\n  };\n  \n  useEffect(() => {\n    checkTokenExpiration();\n  }, []);\n\n  const handleMonthChange = (newDate) => {\n    setDate(newDate);\n    setIsMonthChanged(true); \n  };\n\n  const openPopup = (day) => {\n    console.log(\"Selected day:\", day);\n    const dayString = day.toLocaleDateString('en-CA');\n    const isWeekend = [0, 6].includes(day.getDay());\n\n    const presence = monthlyPresenceData[dayString] || dailyPresence.find(p => p.date === dayString) || {\n      ...defaultTimes,\n      national_holiday: false,\n      weekend: isWeekend,\n      day_off: false,\n      time_off: '00:00',\n      extra_hours: '00:00',\n      notes: '',\n    };\n\n    setSelectedDay(day);\n    setMonthlyPresenceData(prevData => ({\n      ...prevData,\n      [dayString]: presence,\n    }));\n    setShowPopup(true);\n  };\n\n  const closePopup = () => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          ...monthlyPresenceData[dayString], \n        },\n      }));\n    }\n    setShowPopup(false);\n    setSelectedDay(null);\n  };\n\n  const handlePresenceChange = (field, value) => {\n    if (selectedDay) {\n      const dayString = selectedDay.toLocaleDateString('en-CA');\n      setMonthlyPresenceData(prevData => ({\n        ...prevData,\n        [dayString]: {\n          ...prevData[dayString],\n          [field]: value,\n        },\n      }));\n    }\n  };\n  \n\n  const isDataChanged = (dayString) => {\n    const savedData = dailyPresence.find(p => p.date === dayString);\n    const currentData = monthlyPresenceData[dayString];\n  \n    if (!currentData) return false; \n    if (!savedData) return true; \n  \n    return (\n      savedData.entry_time_morning !== currentData.entry_time_morning ||\n      savedData.exit_time_morning !== currentData.exit_time_morning ||\n      savedData.entry_time_afternoon !== currentData.entry_time_afternoon ||\n      savedData.exit_time_afternoon !== currentData.exit_time_afternoon ||\n      savedData.national_holiday !== currentData.national_holiday ||\n      savedData.weekend !== currentData.weekend ||\n      savedData.day_off !== currentData.day_off ||\n      savedData.time_off !== currentData.time_off ||\n      savedData.extra_hours !== currentData.extra_hours ||\n      savedData.notes !== currentData.notes\n    );\n  };\n\n  const isMonthDataChanged = () => {\n    return Object.keys(monthlyPresenceData).some(dayString => {\n      const savedData = dailyPresence.find(p => p.date === dayString);\n      const currentData = monthlyPresenceData[dayString];\n  \n      if (!savedData) return true;\n      return (\n        savedData.entry_time_morning !== currentData.entry_time_morning ||\n        savedData.exit_time_morning !== currentData.exit_time_morning ||\n        savedData.entry_time_afternoon !== currentData.entry_time_afternoon ||\n        savedData.exit_time_afternoon !== currentData.exit_time_afternoon ||\n        savedData.national_holiday !== currentData.national_holiday ||\n        savedData.weekend !== currentData.weekend ||\n        savedData.day_off !== currentData.day_off ||\n        savedData.time_off !== currentData.time_off ||\n        savedData.extra_hours !== currentData.extra_hours ||\n        savedData.notes !== currentData.notes\n      );\n    });\n  };\n\n  const handleSaveMonthlyPresence = async () => {\n    const dataHasChanged = isMonthDataChanged();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n  \n    const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n    const allDaysOfMonth = Array.from({ length: daysInMonth }, (_, i) => {\n      const day = new Date(year, month, i + 1);\n      return day.toLocaleDateString('en-CA');});\n      \n    if (!dataHasChanged) {\n      const confirmSubmit = window.confirm(\n        \"No changes detected. Do you want to submit the presence data with default values?\"\n      );\n      if (!confirmSubmit) return;\n\n    }\n\n    const presenceDataList = allDaysOfMonth.map(day => {\n      const savedData = monthlyPresenceData[day] || dailyPresence.find(p => p.date === day) || {\n        ...defaultTimes,\n        national_holiday: false,\n        weekend: [0, 6].includes(new Date(day).getDay()),  // Mark weekends as true\n        day_off: false,\n        time_off: \"00:00\", // Default value\n        extra_hours: \"00:00\", // Default value\n        notes: \"\", // Default value\n      };\n  \n      return {\n        ...savedData,\n        employee_id: userId,\n        date: day,\n        time_off: savedData.time_off || \"00:00\",\n        extra_hours: savedData.extra_hours || \"00:00\",\n      };\n    });\n\n\n    try {\n      await axios.post(\n        `http://localhost:8000/employee-dashboard?user_id=${userId}`,\n        presenceDataList\n      );\n      alert('Monthly presence data saved successfully!');\n    } catch (error) {\n      console.error(\"Error saving monthly presence data:\", error);\n      alert(\"There was an error saving the data. Please try again.\");\n    }\n  };\n\n  \n\n  const handleDefaultHoursSave = async () => {\n    const defaultHoursData = {\n      user_id: userId,\n      entry_time_morning: defaultTimes.entry_time_morning,\n      exit_time_morning: defaultTimes.exit_time_morning,\n      entry_time_afternoon: defaultTimes.entry_time_afternoon,\n      exit_time_afternoon: defaultTimes.exit_time_afternoon,\n    };\n\n    try {\n      const response = await axios.get('http://localhost:8000/get-default-hours', {\n        params: { user_id: userId }\n      });\n\n      if (response.data) {\n        await axios.put('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours updated successfully!');\n      } else {\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      }\n    } catch (error) {\n      if (error.response && error.response.status === 404) {\n        // Handle the case where no data was found (404)\n        await axios.post('http://localhost:8000/default-hours', defaultHoursData);\n        alert('Default hours saved successfully!');\n      } else {\n        console.error(\"Error saving default hours:\", error);\n        alert(\"Error occurred while saving default hours.\");\n      }\n    }\n  };\n\n  return (\n    <div className=\"calendar-container\">\n      <h1>Monthly Presence Tracker</h1>\n      {/* Sign Out Button */}\n      <button onClick={handleSignOut} className=\"sign-out-button\">Sign Out</button>\n      {error && <p className=\"error-message\">{error}</p>}\n      <Calendar\n        onChange={setDate}\n        value={date}\n        onActiveStartDateChange={({ activeStartDate }) => handleMonthChange(activeStartDate)}\n        tileContent={({ date }) => {\n          const dayString = date.toLocaleDateString('en-CA');\n          const hasCustomData = isDataChanged(dayString);\n          return (\n            <div onClick={() => openPopup(date)}\n                 style={{width: '100%',\n                   height: '100%',\n                   display: 'flex',\n                   alignItems: 'center',\n                   justifyContent: 'center',\n                   zIndex: 1,\n                   cursor: 'pointer', }}>\n                   {hasCustomData ? 'âœ”' : 'default'}\n                 </div>\n              );\n        }}\n        view=\"month\"\n      />\n\n      {showPopup && selectedDay && (\n        <div className=\"popup\">\n          <h2>Edit Presence for {selectedDay.toDateString()}</h2>\n          <div>\n            <label>Morning Entry:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.entry_time_morning || ''}\n              onChange={(e) => handlePresenceChange('entry_time_morning', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Morning Exit:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.exit_time_morning || ''}\n              onChange={(e) => handlePresenceChange('exit_time_morning', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Afternoon Entry:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.entry_time_afternoon || ''}\n              onChange={(e) => handlePresenceChange('entry_time_afternoon', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Afternoon Exit:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.exit_time_afternoon || ''}\n              onChange={(e) => handlePresenceChange('exit_time_afternoon', e.target.value)}\n            />\n          </div>\n\n          <div>\n            <label>National Holiday:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.national_holiday || false}\n              onChange={(e) => handlePresenceChange('national_holiday', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Weekend:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.weekend || false}\n              onChange={(e) => handlePresenceChange('weekend', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Day Off:</label>\n            <input\n              type=\"checkbox\"\n              checked={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.day_off || false}\n              onChange={(e) => handlePresenceChange('day_off', e.target.checked)}\n            />\n          </div>\n          <div>\n            <label>Time Off:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.time_off || ''}\n              onChange={(e) => handlePresenceChange('time_off', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Extra hours:</label>\n            <input\n              type=\"time\"\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.extra_hours || ''}\n              onChange={(e) => handlePresenceChange('extra_hours', e.target.value)}\n            />\n          </div>\n          <div>\n            <label>Notes:</label>\n            <textarea\n              value={monthlyPresenceData[selectedDay.toLocaleDateString('en-CA')]?.notes || ''}\n              onChange={(e) => handlePresenceChange('notes', e.target.value)}\n            />\n          </div>\n          <button onClick={closePopup}>Close</button>\n        </div>\n      )}\n\n      <div className=\"default-times\">\n              <h2>Default Times</h2>\n              <div>\n                <label>Morning Entry:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.entry_time_morning}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, entry_time_morning: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Morning Exit:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.exit_time_morning}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, exit_time_morning: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Afternoon Entry:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.entry_time_afternoon}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, entry_time_afternoon: e.target.value })}\n                />\n              </div>\n              <div>\n                <label>Afternoon Exit:</label>\n                <input\n                  type=\"time\"\n                  value={defaultTimes.exit_time_afternoon}\n                  onChange={(e) => setDefaultTimes({ ...defaultTimes, exit_time_afternoon: e.target.value })}\n                />\n              </div>\n              <button className=\"save-button\" onClick={handleSaveMonthlyPresence}>Save Presence for Month</button>\n              <button className=\"default-hours-button\" onClick={handleDefaultHoursSave}>Save Default Hours</button>\n            </div>\n          </div>\n  );\n};\n\nexport default CalendarComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}