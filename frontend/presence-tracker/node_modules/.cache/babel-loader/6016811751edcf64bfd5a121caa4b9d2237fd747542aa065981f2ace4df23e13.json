{"ast":null,"code":"var _jsxFileName = \"/home/sl/PycharmProjects/presenza/frontend/presence-tracker/src/components/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './Login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const emailSuffix = '@storelink.it';\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const handleEmailChange = e => {\n    const value = e.target.value;\n    setUsername(value);\n\n    // Show suggestions if no \"@\" is present\n    setShowSuggestions(!value.includes('@'));\n  };\n  const handleSuggestionClick = () => {\n    setUsername(prev => `${prev}${emailSuffix}`);\n    setShowSuggestions(false);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    try {\n      const response = await axios.post('http://localhost:8000/token', new URLSearchParams({\n        username: username,\n        password: password\n      }), {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      });\n      const {\n        access_token,\n        role,\n        user_id\n      } = response.data;\n      localStorage.setItem('token', access_token);\n      localStorage.setItem('user_id', user_id);\n      // Redirect based on role\n      if (role === 'admin') {\n        navigate('/admin-dashboard');\n      } else {\n        navigate('/employee-dashboard');\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      setError('Login failed. Please check your credentials and try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter your email\",\n          value: username,\n          onChange: handleEmailChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), showSuggestions && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'absolute',\n            backgroundColor: 'white',\n            border: '1px solid #ccc',\n            borderRadius: '4px',\n            width: '100%',\n            zIndex: 10,\n            cursor: 'pointer'\n          },\n          onClick: handleSuggestionClick,\n          children: [username, \"@storelink.it\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate('/register'),\n      style: {\n        marginTop: '10px'\n      },\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"H5PusaekyDIMPdEyjwVMkNg531Q=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","axios","jsxDEV","_jsxDEV","Login","_s","username","setUsername","password","setPassword","error","setError","navigate","emailSuffix","showSuggestions","setShowSuggestions","handleEmailChange","e","value","target","includes","handleSuggestionClick","prev","handleSubmit","preventDefault","response","post","URLSearchParams","headers","access_token","role","user_id","data","localStorage","setItem","console","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","style","position","type","placeholder","onChange","backgroundColor","border","borderRadius","width","zIndex","cursor","onClick","marginTop","_c","$RefreshReg$"],"sources":["/home/sl/PycharmProjects/presenza/frontend/presence-tracker/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport './Login.css';\n \nconst Login = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const emailSuffix = '@storelink.it';\n  const [showSuggestions, setShowSuggestions] = useState(false);\n\n  const handleEmailChange = (e) => {\n    const value = e.target.value;\n    setUsername(value);\n\n    // Show suggestions if no \"@\" is present\n    setShowSuggestions(!value.includes('@'));\n  };\n\n  const handleSuggestionClick = () => {\n    setUsername((prev) => `${prev}${emailSuffix}`);\n    setShowSuggestions(false);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    try {\n      const response = await axios.post('http://localhost:8000/token', new URLSearchParams({\n        username: username,\n        password: password,\n      }), {\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n      });\n\n      const { access_token, role, user_id} = response.data;\n      localStorage.setItem('token', access_token);\n      localStorage.setItem('user_id', user_id);\n      // Redirect based on role\n      if (role === 'admin') {\n        navigate('/admin-dashboard');\n      }\n      else {\n        navigate('/employee-dashboard');\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      setError('Login failed. Please check your credentials and try again.');\n    }\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n      <div style={{ position: 'relative' }}>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your email\"\n            value={username}\n            onChange={handleEmailChange}\n          />\n          {showSuggestions && (\n            <div\n              style={{\n                position: 'absolute',\n                backgroundColor: 'white',\n                border: '1px solid #ccc',\n                borderRadius: '4px',\n                width: '100%',\n                zIndex: 10,\n                cursor: 'pointer',\n              }}\n              onClick={handleSuggestionClick}\n            >\n              {username}@storelink.it\n            </div>\n          )}\n        </div>\n        \n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button type=\"submit\">Login</button>\n      </form>\n      {error && <p>{error}</p>}\n\n      <button onClick={() => navigate('/register')} style={{ marginTop: '10px' }}>\n        Register\n      </button>\n    </div>\n\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}